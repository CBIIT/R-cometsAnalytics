<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>COMETS Analytics Tutorial</title>
  <meta name="description" content="This tutorial provides an overview and detailed instructions for the use of COMETS Analytics">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="COMETS Analytics Tutorial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="static/COMETSLogo.png" />
  <meta property="og:description" content="This tutorial provides an overview and detailed instructions for the use of COMETS Analytics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="COMETS Analytics Tutorial" />
  
  <meta name="twitter:description" content="This tutorial provides an overview and detailed instructions for the use of COMETS Analytics" />
  <meta name="twitter:image" content="static/COMETSLogo.png" />

<meta name="author" content="CAT Work group">


<meta name="date" content="2018-10-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="quickstart.html">
<link rel="next" href="manual.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="tufte.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COMETS Analytics Tutorial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i>Overview</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="quickstart.html"><a href="quickstart.html"><i class="fa fa-check"></i><b>1</b> Get Started with Sample File</a><ul>
<li class="chapter" data-level="1.1" data-path="quickstart.html"><a href="quickstart.html#sample-input-file"><i class="fa fa-check"></i><b>1.1</b> Sample Input File</a></li>
<li class="chapter" data-level="1.2" data-path="quickstart.html"><a href="quickstart.html#quick-analysis"><i class="fa fa-check"></i><b>1.2</b> Quick Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cohort.html"><a href="cohort.html"><i class="fa fa-check"></i><b>2</b> Conduct Cohort Data Analyses</a><ul>
<li class="chapter" data-level="2.1" data-path="cohort.html"><a href="cohort.html#input"><i class="fa fa-check"></i><b>2.1</b> Step 1 Data Preparation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="cohort.html"><a href="cohort.html#metabolites"><i class="fa fa-check"></i><b>2.1.1</b> Metabolites</a></li>
<li class="chapter" data-level="2.1.2" data-path="cohort.html"><a href="cohort.html#subject-metabolites"><i class="fa fa-check"></i><b>2.1.2</b> Subject Metabolites</a></li>
<li class="chapter" data-level="2.1.3" data-path="cohort.html"><a href="cohort.html#subject-data"><i class="fa fa-check"></i><b>2.1.3</b> Subject Data</a></li>
<li class="chapter" data-level="2.1.4" data-path="cohort.html"><a href="cohort.html#varmap"><i class="fa fa-check"></i><b>2.1.4</b> VarMap</a></li>
<li class="chapter" data-level="2.1.5" data-path="cohort.html"><a href="cohort.html#inputmodels"><i class="fa fa-check"></i><b>2.1.5</b> Models</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="cohort.html"><a href="cohort.html#step-2-harmonization"><i class="fa fa-check"></i><b>2.2</b> Step 2 Harmonization</a><ul>
<li class="chapter" data-level="2.2.1" data-path="cohort.html"><a href="cohort.html#harmonization-file"><i class="fa fa-check"></i><b>2.2.1</b> Harmonization File</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="cohort.html"><a href="cohort.html#step-3-data-and-model-integrity"><i class="fa fa-check"></i><b>2.3</b> Step 3 Data and Model Integrity</a></li>
<li class="chapter" data-level="2.4" data-path="cohort.html"><a href="cohort.html#step-4-run-models"><i class="fa fa-check"></i><b>2.4</b> Step 4 Run Models</a><ul>
<li class="chapter" data-level="2.4.1" data-path="cohort.html"><a href="cohort.html#interactive-mode"><i class="fa fa-check"></i><b>2.4.1</b> Interactive Mode</a></li>
<li class="chapter" data-level="2.4.2" data-path="cohort.html"><a href="cohort.html#batch-mode"><i class="fa fa-check"></i><b>2.4.2</b> Batch Mode</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="cohort.html"><a href="cohort.html#step-5-correlation-analyses-output"><i class="fa fa-check"></i><b>2.5</b> Step 5 Correlation Analyses Output</a><ul>
<li class="chapter" data-level="2.5.1" data-path="cohort.html"><a href="cohort.html#metabolite-tagging"><i class="fa fa-check"></i><b>2.5.1</b> Metabolite Tagging</a></li>
<li class="chapter" data-level="2.5.2" data-path="cohort.html"><a href="cohort.html#create-subset-of-tagged-metabolites"><i class="fa fa-check"></i><b>2.5.2</b> Create Subset of ‘Tagged’ Metabolites</a></li>
<li class="chapter" data-level="2.5.3" data-path="cohort.html"><a href="cohort.html#create-a-heatmap"><i class="fa fa-check"></i><b>2.5.3</b> Create A Heatmap</a></li>
<li class="chapter" data-level="2.5.4" data-path="cohort.html"><a href="cohort.html#the-heatmap"><i class="fa fa-check"></i><b>2.5.4</b> The Heatmap</a></li>
<li class="chapter" data-level="2.5.5" data-path="cohort.html"><a href="cohort.html#the-heatmap-2"><i class="fa fa-check"></i><b>2.5.5</b> The Heatmap (2)</a></li>
<li class="chapter" data-level="2.5.6" data-path="cohort.html"><a href="cohort.html#annotations-and-hierarchical-clustering"><i class="fa fa-check"></i><b>2.5.6</b> Annotations and Hierarchical Clustering</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="cohort.html"><a href="cohort.html#step-6-send-for-meta-analyses"><i class="fa fa-check"></i><b>2.6</b> Step 6 Send for Meta-analyses</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manual.html"><a href="manual.html"><i class="fa fa-check"></i><b>3</b> Manual</a><ul>
<li class="chapter" data-level="3.1" data-path="manual.html"><a href="manual.html#register"><i class="fa fa-check"></i><b>3.1</b> Registration</a></li>
<li class="chapter" data-level="3.2" data-path="manual.html"><a href="manual.html#data-preparation"><i class="fa fa-check"></i><b>3.2</b> Data Preparation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="manual.html"><a href="manual.html#create-input"><i class="fa fa-check"></i><b>3.2.1</b> Create Input</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="manual.html"><a href="manual.html#details-harmonize"><i class="fa fa-check"></i><b>3.3</b> Harmonization details</a><ul>
<li class="chapter" data-level="3.3.1" data-path="manual.html"><a href="manual.html#preharmonization"><i class="fa fa-check"></i><b>3.3.1</b> Preharmonization</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="manual.html"><a href="manual.html#integrity"><i class="fa fa-check"></i><b>3.4</b> Integrity checks</a><ul>
<li class="chapter" data-level="3.4.1" data-path="manual.html"><a href="manual.html#data"><i class="fa fa-check"></i><b>3.4.1</b> Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="manual.html"><a href="manual.html#models"><i class="fa fa-check"></i><b>3.4.2</b> Models</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="manual.html"><a href="manual.html#correlation-analyses"><i class="fa fa-check"></i><b>3.5</b> Correlation Analyses</a><ul>
<li class="chapter" data-level="3.5.1" data-path="manual.html"><a href="manual.html#details"><i class="fa fa-check"></i><b>3.5.1</b> Details</a></li>
<li class="chapter" data-level="3.5.2" data-path="manual.html"><a href="manual.html#output"><i class="fa fa-check"></i><b>3.5.2</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="manual.html"><a href="manual.html#linear-models"><i class="fa fa-check"></i><b>3.6</b> Linear Models</a><ul>
<li class="chapter" data-level="3.6.1" data-path="manual.html"><a href="manual.html#details-1"><i class="fa fa-check"></i><b>3.6.1</b> Details</a></li>
<li class="chapter" data-level="3.6.2" data-path="manual.html"><a href="manual.html#output-1"><i class="fa fa-check"></i><b>3.6.2</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="manual.html"><a href="manual.html#logistic-models"><i class="fa fa-check"></i><b>3.7</b> Logistic Models</a><ul>
<li class="chapter" data-level="3.7.1" data-path="manual.html"><a href="manual.html#details-2"><i class="fa fa-check"></i><b>3.7.1</b> Details</a></li>
<li class="chapter" data-level="3.7.2" data-path="manual.html"><a href="manual.html#output-2"><i class="fa fa-check"></i><b>3.7.2</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="manual.html"><a href="manual.html#meta-analyses"><i class="fa fa-check"></i><b>3.8</b> Meta-Analyses</a><ul>
<li class="chapter" data-level="3.8.1" data-path="manual.html"><a href="manual.html#details-3"><i class="fa fa-check"></i><b>3.8.1</b> Details</a></li>
<li class="chapter" data-level="3.8.2" data-path="manual.html"><a href="manual.html#output-3"><i class="fa fa-check"></i><b>3.8.2</b> Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i>FAQ</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.comets-analytics.org" target="blank">Comets Analytics</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">COMETS Analytics Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cohort" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Conduct Cohort Data Analyses</h1>
<p>This chapter describes the step-by-step process of conducting cohort analyses for correlation analyses. You will need to have an account set-up (see <a href="manual.html#register">Registration</a>) and have the sample input file (see <a href="quickstart.html#sample-input-file">Sample Input File</a>).</p>
<div id="input" class="section level2">
<h2><span class="header-section-number">2.1</span> Step 1 Data Preparation</h2>
<p>Each cohort is required to assemble their data into the standard Excel format from a variety of sources (xls, stata, sas, or r). The file is used for harmonization and analyses. There are five sheets that are required: three of your own data following best practices and two for the project at hand which will be sent by the PI. The detailed requirements are outlined below. A tool is available on COMETS Analytics to help create this file called create input (see <a href="manual.html#create-input">Create Input</a>).</p>
<div id="metabolites" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Metabolites</h3>
<p>The <em>Metabolites</em> sheet contains the meta-data related to the metabolite annotations, where the metabolites are the rows. This sheet requires two input columns: “metabid” and “metabolite_name”. Additional columns are helpful in the harmonization of metabolites. There are no restrictions on the names of the helpful columns, except HMDB ID and COMP ID should be named “HMDB_ID” and “COMP_ID”. Additional meta-data include chemical pathways, alternate names, database IDs (HMDB, PubChem, etc.), mass/charge, retention times, etc. This meta-information is important as we are continuously updating the harmonization of metabolite names across studies and platforms. Importantly, the metabolite IDs in the “metabid” column are required to match the metabolite IDs used in the metabolite abundance matrix (sheet <em>SubjectMetabolites</em>).</p>
<p><span class="textintro">The <em>Metabolites</em> sheet contains the meta-data for metabolites used for harmonization.</span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. metabid</strong></span> is the name of the metabolites which may be different than the chemical ID with the non=stndara required field to denote the metabolite columns in <em>SubjectMetabolites</em> sheet.</p>
<p><span class="textb"><strong>b. metabolite_name</strong> </span> is a required field to denote the biochemical name of the metabolite, with all the non-standard characters.</p>
<p><span class="textc"><strong>c. Helpful columns</strong></span> columns C-H are an example of additional metabolite information. If possible, cohorts should include as much metabolite information as possible to help in harmonization, especially mass charge, retention time, and HMDB ID.</p>
</div>
<p><a href="static/input_metabolites.PNG" target="_blank"><img src="static/input_metabolites.PNG" style="width: 60%"></a></p>
</div>
<div id="subject-metabolites" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Subject Metabolites</h3>
<p>The <em>SubjectMetabolites</em> sheet contains the measured metabolite values for the cohort samples. This sheet would typically be your data analysis file, where the metabolites are the columns and the subjects are the rows. The first column in this sheet represents the sample ID. Each subsequent column represents the measured values of one metabolite. The column names in this sheet (except the column named “SAMPLE_ID”) must match the row names under the column “metabid” in sheet <em>Metabolites</em>. Further, the row names in this sheet are required to match the row names in the sheet <em>SubjectData</em>. Metabolite values should be analyses-ready.</p>
<p><span class="textintro">The <em>SubjectMetabolites</em> sheet contains the measured metabolite values for the cohort samples.</span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. SubjectMetabolites</strong></span> this sheet in the input file contains the measured metabolite values for each sample.</p>
<p><span class="textb"><strong>b. SAMPLE_ID</strong> </span> contains the study sample IDs, the subject identifier.</p>
<p><span class="textc"><strong>c. Metabolite ID</strong></span> is indicated in the first row of the sheet to represent all metabolites listed in the <em>Metabolites</em> sheet.</p>
<p><span class="textd"><strong>d. Each row</strong></span> represents data for each subject in the cohort.</p>
<p><span class="texte"><strong>e. Value</strong></span> reflects the analyses-ready metabolite abundances.</p>
</div>
<p><a href="static/input_subjectmetabolites.png" target="_blank"><img src="static/input_subjectmetabolites.png" style="width: 60%"></a></p>
</div>
<div id="subject-data" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Subject Data</h3>
<p>The <em>SubjectData</em> sheet contains the subject-level data where the column names represent the variable names as used in the cohort, and each row represents a unique subject. Importantly, these column names do not need to be harmonized according to the final meta-analysis names; this function is handled separately within the <em>VarMap</em> sheet. Equally important, the row names in this <em>SubjectData</em> sheet must match the row names of the <em>SubjectMetabolites</em> sheet.</p>
<p><span class="textintro">The <em>SubjectData</em> sheet contains the subject-level covariate data (all other information besides metabolites; the coding is laid out in the <em>VarMap</em> sheet) for each sample. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. SubjectData</strong></span> is a sheet in the input file that contains the subject-level covariate data for each sample. Examples include factors such as age, gender, smoking, body mass index, race, and education.</p>
<p><span class="textb"><strong>b. SAMPLE_ID</strong> </span> contains the sample identifiers.</p>
<p><span class="textc"><strong>c. Columns</strong></span> correspond to subject level covariates, as used in the cohort of origin. Column names are in row 1 and (except the column named <strong>SAMPLE_ID</strong>) must match the entries in the column <strong>COHORTVARIABLE</strong> from the sheet <i>VarMap</i>.</p>
<p><span class="textd"><strong>d. Rows</strong></span> correspond to observations, with each row containing all of the subject-level covariate values for a given sample. Row names (e.g., “SAMPLE_ID”) are required to match the row names in the sheet <i>SubjectMetabolites</i>.</p>
<p><span class="texte"><strong>e. Cells</strong></span> contain subject-level covariate values.</p>
</div>
<p><a href="static/input_3subjectdata.png" target="_blank"><img src="static/input_3subjectdata.png" style="width: 60%"></a></p>
</div>
<div id="varmap" class="section level3">
<h3><span class="header-section-number">2.1.4</span> VarMap</h3>
<p><span class="textintro">The <em>VarMap</em> sheet contains the coding scheme for the covariates in your analysis, and maps the cohort variable names to the COMETS internal variable names. For projects in COMETS, which represent multi-cohort efforts coordinated by a central PI, this scheme will be completed by the PI and sent to you as part of their example data input files. There is no need to modify. <br>Example: The cohort variable “bmi” would be mapped to the COMETS internal variable “bmi_grp” and must be coded as “0” for BMI&lt;18.5, “1” for BMI 18.5 to &lt;25, “2” for BMI 25 to &lt;30, “3” for BMI 30.0+, and “4” for missing as defined in the column “VARDEFINITION”. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. VarMap</strong></span> is a sheet in the input file that gives the original cohort variable names and the COMETS internal variable names.</p>
<p><span class="textb"><strong>b. VARREFERENCE</strong> </span> refers to the internal COMETS variable names.</p>
<p><span class="textc"><strong>c. VARDEFINITION</strong></span> defines how the variables should be coded.</p>
<p><span class="textd"><strong>d. COHORTVARIABLE</strong></span> corresponds to the original cohort variable name.</p>
<p><span class="texte"><strong>e. COHORTNOTES</strong></span> gives additional info for some variables (e.g., “age”, “female”), missing values are not allowed.</p>
</div>
<p><a href="static/input_varmap3.PNG" target="_blank"><img src="static/input_varmap3.PNG" style="width: 60%"></a></p>
</div>
<div id="inputmodels" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Models</h3>
<p>This worksheet specifies the models to run. In this example, Model “2.1” is named “Gender stratified” and the analysis will be run with “age” as the exposure and “All metabolites” as the outcomes, while adjusting for smoking status (“smk_grp”), BMI (“bmi_grp”), race (“race_grp”), education (“educ_grp”), alcohol consumption (“alc_grp”), multivitamin use (“multivitamin”), hormonal status (“horm_curr”), and fasting status (“fasted”). This analysis will be stratified by gender using the internal COMETS variable “female”.</p>
<p><span class="textintro">Specify the analytical models you wish to run. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Models</strong></span> is a sheet in the input file that contains the models to be run on the cohort data.</p>
<p><span class="textb"><strong>b. MODEL</strong> </span> contains the model number and the model name. The results files will be named according to the chosen model name.</p>
<p><span class="textc"><strong>c. OUTCOMES</strong></span> specifies which variable(s) will be the dependent variable(s).</p>
<p><span class="textd"><strong>d. EXPOSURE</strong></span> specifies the independent variable of interest. The beta coefficient for this variable will be returned in the results.</p>
<p><span class="texte"><strong>e. ADJUSTMENT</strong></span> specifies the potential confounders to be included in the model (optional).</p>
<p><span class="textf"><strong>f. STRATIFICATION</strong></span> for stratified analyses only. Results will be returned for all strata within this variable (optional).</p>
<p><span class="textg"><strong>g. WHERE</strong></span> if the analysis is meant to be run on only a subset of the cohort, this column will contain the subset definition (e.g., “female==1” for an analysis stratified by hormone therapy use)(optional).</p>
</div>
<p><a href="static/input_modelspecification.png"><img src="static/input_modelspecification.png" style="width: 60%"></a></p>
</div>
</div>
<div id="step-2-harmonization" class="section level2">
<h2><span class="header-section-number">2.2</span> Step 2 Harmonization</h2>
<p>The harmonization step will assess whether your cohort’s metabolites are available in the master metabolites list, so that a universal ID (named “UID_01”) can be associated with your metabolites. The COMETS master metabolite list is maintained by IMS and can be sent in advance of the analyses to ensure availability of a universal ID for each of your metabolites. The universal ID ensures alignment of metabolites across the different cohorts to ensure identification for meta-analyses. Metabolite harmonization is made possible by maintaining an up-to-date master list of metabolites across platforms and cohorts to establish a universal metabolite ID. This activity is managed by the data harmonization work group and IMS. In order to maximize harmonization of metabolites, it is important to include as much information (i.e., metabolite meta-data) in the input file such as HMDB ID, KEGG ID, or other identifiers. For more details, see</p>
<p><strong>Note:</strong> The harmonization step produces an output file that needs to be sent to <a href="mailto:comets.analytics@gmail.com">comets.analytics@gmail.com</a> to keep track of harmonization rates.</p>
<div id="harmonization-file" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Harmonization File</h3>
<p><span class="textintro">The names of metabolites input into the software are automatically harmonized to a common name. This important feature facilitates comparison of metabolites across different studies that use different platforms and/or naming conventions.</span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. metabid</strong></span> corresponds to metabolite IDs as defined by each individual cohort. The metabolite IDs correspond to the column “metabid” from the sheet <em>Metabolites</em> of the input file.</p>
<p><span class="textb"><strong>b. metabolite_names</strong></span> corresponds to metabolite names as defined by each individual cohort. The metabolite names correspond to the column “metabolite_name” from the sheet <em>Metabolites</em> of the input file.</p>
<p><span class="textc"><strong>c. Columns</strong></span> (except A, B, and C) correspond to metabolite meta-information that was either already present in the input file or was matched from the internal COMETS database. We highly recommend to add at least one public database identifier (e.g., HMDB ID).</p>
<p><span class="textd"><strong>d. Rows</strong></span> correspond to metabolites, with each row containing all available meta-information for one metabolite.</p>
</div>
<p><a href="static/output_harmonization.png"><img src="static/output_harmonization.png" style="width: 60%"></a></p>
</div>
</div>
<div id="step-3-data-and-model-integrity" class="section level2">
<h2><span class="header-section-number">2.3</span> Step 3 Data and Model Integrity</h2>
<p>Data and integrity checks are run to ensure the appropriate data are presented for analyses. Please take note of the messages to correct your input file. In some cases, you will not be able to proceed to the analyses step. See Chapter <a href="manual.html#integrity">3.4</a> <a href="manual.html#integrity">Integrity Checks</a></p>
</div>
<div id="step-4-run-models" class="section level2">
<h2><span class="header-section-number">2.4</span> Step 4 Run Models</h2>
<p>There are two ways to run models: <strong>interactive mode</strong> allows you to specify ad hoc models when exploring the data, and <strong>batch mode</strong> models are prespecified through the model sheet in your input file which can be run one at a time or all models for running all models specified in the models sheet which uses a queueing system.</p>
<div id="interactive-mode" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Interactive Mode</h3>
<p><span class="textintro">Allows you to run individual models to specify model parameters and receive instantaneous results by clicking on interactive model specification.</span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Passed integrity check</strong></span> after harmonization, if data upload was successful and the data passed COMETS integrity checks, you will get a confirmation message.</p>
<p><span class="textb"><strong>b. Specify interactive</strong> </span> by clicking on ‘Interactive user input’ under ‘Specify Method of Analyses’.</p>
</div>
<p><a href="static/output_interactivemode_1.png"><img src="static/output_interactivemode_1.png" style="width: 60%"></a></p>
<div id="explore-your-interactive-mode-output" class="section level4">
<h4><span class="header-section-number">2.4.1.1</span> Explore Your Interactive Mode Output</h4>
<p><span class="textintro">Exploring your output. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Correlation results </strong></span> check if correlation analyses were successful – if so click ‘Download Results’ and forward to the COMETS harmonization group who will utilize these for the meta-analyses.</p>
<p><span class="textb"><strong>b. Specified model parameters </strong> </span> as defined in the interactive mode.</p>
<p><span class="textc"><strong>c. Correlation coefficient: </strong></span> Spearman Rank correlation coefficient between the specified outcome and the exposure (adjusting for the <i>adjvars</i>, and by strata if applicable).</p>
<p><span class="textd"><strong>d. p-value</strong></span> significance level for the correlation coefficient.</p>
<p><span class="texte"><strong>e. n</strong></span> number of samples included in the specified model.</p>
<p><span class="textf"><strong>f. Tag</strong></span> select metabolites for further analysis. This creates a subset of metabolites that can then be specified in the interactive output.</p>
<span class="textg"><strong>Explore further </strong></span> further results can be ordered according to name of outcome, exposure, or “adjvars”, or by correlation coefficient, p-value, or n. Alternatively, you can use the search boxes to search for specific metabolites or define thresholds.
</div>
<p><a href="static/output_interactivemode_3.png"><img src="static/output_interactivemode_3.png" style="width: 60%"></a></p>
</div>
</div>
<div id="batch-mode" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Batch Mode</h3>
<p><em>All Models</em> is a special run of the prespecified models. In this mode, all models are run in a queue and you will get the results via email.</p>
</div>
</div>
<div id="step-5-correlation-analyses-output" class="section level2">
<h2><span class="header-section-number">2.5</span> Step 5 Correlation Analyses Output</h2>
<p>After running your correlation analyses by <a href="cohort.html#interactive-mode">Interactive mode</a> or <a href="cohort.html#batch-mode">Batch mode</a>, results are available under the correlation results and heatmap tabs. For other types of analyses, see <a href="manual.html#manual">Manual</a>. Some of the interactive features of the results and heatmap are described below.</p>
<div id="metabolite-tagging" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Metabolite Tagging</h3>
<p>The metabolite tagging (‘Tag’ option) is a feature in the correlate and heatmap tabs to select and create a subset of metabolites for further analysis based on results for further investigation. Once tagged, the list of metabolites can be used in interactive mode to specify other analyses to conduct.</p>
<p><span class="textintro">To select and create a subset of metabolites for further analysis based on the correlation results the Tag function can be used. Below an example with age (exposure) and metabolites (outcome) as run in the ‘Interactive user input’ ‘Correlation Results’ tab. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Set level of significance </strong></span> in this example the level of significance is defined as p&lt;0.00001.</p>
<p><span class="textb"><strong>b. Select significant metabolites</strong> </span> by ticking the box all significant metabolites are selected.</p>
<p><span class="textc"><strong>c. Tag metabolites </strong></span> by ticking the ‘Tag’ box all selected metabolites are automatically marked.</p>
</div>
<p><a href="static/output_heatmap3_1.PNG" target="_blank"><img src="static/output_heatmap3_1.PNG" style="width: 60%"></a></p>
</div>
<div id="create-subset-of-tagged-metabolites" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Create Subset of ‘Tagged’ Metabolites</h3>
<p><span class="textintro">Once the ‘Tag’ button is clicked a screen will appear </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Name your Tag </strong></span> give the subset of metabolites a name (e.g., “age_related_metabolites”).</p>
<p><span class="textb"><strong>b. Create Tag </strong></span> click the button ‘Create Tag’ to create the ‘Tag’.</p>
<p><span class="textc"><strong>c. Tag is created </strong></span> a new box appears with an overview of your tagged metabolites. Close the newly created ‘Tag’.</p>
</div>
<p><a href="static/output_heatmap3_2.PNG" target="_blank"><img src="static/output_heatmap3_2.PNG" style="width: 60%"></a></p>
</div>
<div id="create-a-heatmap" class="section level3">
<h3><span class="header-section-number">2.5.3</span> Create A Heatmap</h3>
<p><span class="textintro">Go back to the ‘Interactive user input’ and select your newly created subset, using the ‘Tag’ function </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Select your exposure </strong></span> select the newly created “age_related_metabolites” tag.</p>
<p><span class="textb"><strong>b. Select your outcome</strong> </span> select the newly created “age_related_metabolites” tag.</p>
<p><span class="textc"><strong>c. Run the model </strong></span> click the run button.</p>
<p><span class="textd"><strong>d. Heatmap</strong></span> select the heatmap tab to view the heatmap.</p>
</div>
<p><a href="static/output_heatmap3_3.PNG" target="_blank"><img src="static/output_heatmap3_3.PNG" style="width: 60%"></a></p>
</div>
<div id="the-heatmap" class="section level3">
<h3><span class="header-section-number">2.5.4</span> The Heatmap</h3>
<p><span class="textintro">Exposures are specified on the x-axis and the outcomes on the y-axis. Different features are available in this interface. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Sort by outcome </strong></span> the display of the heatmap can be sorted by outcome or exposure (in the ‘Outcomes Sort By’ box).</p>
<p><span class="textb"><strong>b. Sort by strata</strong> </span> when a stratified analysis is performed, the display of the heatmap can be sorted by the different strata (in the ‘Strata Sort By’ box).</p>
<p><span class="textc"><strong>c. Choose your color </strong></span> in the ‘Palette’ box different color schemes for the heatmap can be selected.</p>
<p><span class="textd"><strong>d. Adjust plot height and width</strong></span> the ‘Plot height’ and ‘Plot width’ can be adjusted using their respective boxes.</p>
</div>
<p><a href="static/output_heatmap3_4.PNG" target="_blank"><img src="static/output_heatmap3_4.PNG" style="width: 60%"></a></p>
</div>
<div id="the-heatmap-2" class="section level3">
<h3><span class="header-section-number">2.5.5</span> The Heatmap (2)</h3>
<p><span class="textintro">Additional features of the heatmap can be chosen. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Additional toolbar </strong></span> when moving the mouse in the top right corner of the graph an extra toolbar will be visible which allows you to:</p>
<p>Download plot as png</p>
<p>Save and edit plot in cloud</p>
<p>Zoom in and out</p>
<p>Pan</p>
<p>Autoscale</p>
<p>Reset axes</p>
<p>Use Plotly features (e.g., toggle spike lines, show closest data on hover, compare data on hover)</p>
</div>
<p><a href="static/output_heatmap3_5.PNG" target="_blank"><img src="static/output_heatmap3_5.PNG" style="width: 60%"></a></p>
</div>
<div id="annotations-and-hierarchical-clustering" class="section level3">
<h3><span class="header-section-number">2.5.6</span> Annotations and Hierarchical Clustering</h3>
<p><span class="textintro">Annotations (display of the correlation coefficients in numbers) and hierarchical clustering (showing the metabolite clusters) can be superimposed on the heatmap. </span></p>
<div class="marginnote">
<p><span class="texta"><strong>a. Annotations </strong></span> ticking this box will allow you to display the correlation coefficients in the plot.</p>
<p><span class="textb"><strong>b. Hierachical clustering </strong></span> ticking this box will allow you to display the metabolite clusters on the left side of the heatmap.</p>
<p><span class="textc"><strong>c. Choose your dimensions </strong></span> by clicking the ‘Plot height’ and “Plot width’ and entering values (e.g., 900 by 1100) the plot will show in the chosen dimensions.</p>
</div>
<p><a href="static/output_heatmap3_6.PNG" target="_blank"><img src="static/output_heatmap3_6.PNG" style="width: 60%"></a></p>
<p><a href="static/output_heatmap3.PNG" target="_blank"><img src="static/output_heatmap3.PNG" style="width: 60%"></a></p>
<p><a href="static/output_heatmap4.PNG" target="_blank"><img src="static/output_heatmap4.PNG" style="width: 60%"></a></p>
<p><span class="textintro">For details on outputs from other models, see the output section of each method under Chapter <a href="manual.html#manual">3</a> <a href="manual.html#manual">Manual</a>. </span></p>
</div>
</div>
<div id="step-6-send-for-meta-analyses" class="section level2">
<h2><span class="header-section-number">2.6</span> Step 6 Send for Meta-analyses</h2>
<p>After you receive email notification of a successful run of <strong>ALL MODELS</strong>, please forward the email to <a href="mailto:comets.analytics@gmail.com">comets.analytics@gmail.com</a>. The results will be meta-analyzed centrally.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quickstart.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manual.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ellatemprosa/cometstutorial/02-stepbystep.Rmd",
"text": "Edit"
},
"download": ["catutorial.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
